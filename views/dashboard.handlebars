<div class="row">
  {{> sidebar dashboard='dashboard' user=user }}
  <div class="col-9-lg pt-70">
    <div class="px-20">
      {{# if msg}}
      <div class="card bg-error text-white" id="message-container">
        {{msg}}
        <i class="fas fa-times pull-right mt-5 cursor-pointer" id="hide-message-btn"></i>
      </div>
      {{/if}}
      <h1>Dashboard</h1>
      <div class="row">
        <div class="col-4 p-5">
          <div class="bg-white border-radius-10 p-20">
            <i class="fas fa-code-branch mr-5"></i>
            {{user.total_repositories}}
            Total Repositories
          </div>
        </div>
        <div class="col-4 p-5">
          <div class="bg-white border-radius-10 p-20">
            <i class="fas fa-user mr-5"></i>
            {{user.total_collaborators}}
            Total Collaborators
          </div>
        </div>
        <div class="col-4 p-5">
          <div class="bg-white border-radius-10 p-20">
            <i class="fas fa-user mr-5"></i>
            {{user.total_collaborators}}
            Total Collaborators
          </div>
        </div>
      </div>
      {{#if user.collaborators}}
      <div class="row mt-30">
        <div class="col-12">
          <h2>Collaborators</h2>
        </div>
        {{# each user.collaborators}}
        <div class="col-2 p-5 collaborator-avatar-container" onclick="window.location='/collaborators/{{this.login}}'">
          <div class="is-center">
            <div class="collaborator-avatar position-relative">
              <div class="bg-white rounded-circle bg-cover"
                style="background-image: url({{this.avatar_url}}); width: var(--avatar-dimension); padding-top: var(--avatar-dimension);">
              </div>
              <div class="overlay rounded-circle"></div>
            </div>
          </div>
          <p class="is-text-center mt-10">
            {{this.name}}
          </p>
          <small class="is-text-center text-dark is-center">
            {{this.login}}
          </small>
        </div>
        {{/each}}
      </div>
    </div>
    {{/if}}
  </div>
</div>
</div>

<script>
  const hideMessageBtn = document.querySelector("#hide-message-btn")
  const messageContainer = document.querySelector("#message-container")

  hideMessageBtn.addEventListener('click', () => {
    messageContainer.classList.add("d-none")
  })
</script>